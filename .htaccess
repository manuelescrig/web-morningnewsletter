RewriteEngine On

# API endpoints
RewriteRule ^api/create-checkout-session/?$ api/create-checkout-session.php [L]
RewriteRule ^api/stripe-webhook/?$ api/stripe-webhook.php [L]
RewriteRule ^api/cancel-subscription/?$ api/cancel-subscription.php [L]
RewriteRule ^api/billing-portal/?$ api/billing-portal.php [L]

# Clean URLs for main pages
RewriteRule ^terms/?$ legal/terms.php [L]
RewriteRule ^privacy/?$ legal/privacy.php [L]
RewriteRule ^login/?$ auth/login.php [L]
RewriteRule ^register/?$ auth/register.php [L]
RewriteRule ^payment-success/?$ payment-success.php [L]
RewriteRule ^jobs/?$ jobs.php [L]
RewriteRule ^careers/?$ jobs.php [L]
RewriteRule ^support/?$ support.php [L]
RewriteRule ^about/?$ about.php [L]
RewriteRule ^press/?$ press.php [L]

# Prevent access to sensitive files
<Files ~ "^\.">
    Order allow,deny
    Deny from all
</Files>

# Prevent access to config files
<Files "*.db">
    Order allow,deny
    Deny from all
</Files>